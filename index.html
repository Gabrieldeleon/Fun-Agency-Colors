<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tu equipo</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    .wrap {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 24px;
    }
    .card {
      background: rgba(255,255,255,0.14);
      border-radius: 20px;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      padding: 28px 32px;
      max-width: 720px;
      width: 100%;
      box-shadow: 0 8px 30px rgba(0,0,0,0.18);
    }
    h1 {
      font-size: clamp(42px, 7vw, 80px);
      line-height: 1.05;
      margin: 0 0 12px 0;
      letter-spacing: -0.02em;
    }
    p {
      margin: 0.5rem 0;
      font-size: clamp(16px, 2.6vw, 22px);
      opacity: 0.9;
    }
    .muted { opacity: 0.75; font-size: 14px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1 id="teamTitle">Asignandoâ€¦</h1>
      <p id="teamHint">Espera un segundo</p>
      <p class="muted" id="footnote"></p>
    </div>
  </div>

<script>
(async function(){
  const colorMap = {
    'Rojo': '#e53935',
    'Azul': '#1e88e5',
    'Verde': '#43a047',
    'Amarillo': '#fdd835',
    'Naranja': '#fb8c00',
    'Morado': '#8e24aa',
    'Gris': '#9e9e9e'
  };

  function idealTextColor(bgHex){
    function hexToRgb(h){
      let s = h.replace('#','');
      if (s.length === 3) s = s.split('').map(x=>x+x).join('');
      const num = parseInt(s, 16);
      return {r:(num>>16)&255, g:(num>>8)&255, b:num&255};
    }
    const {r,g,b} = hexToRgb(bgHex);
    const yiq = (r*299 + g*587 + b*114) / 1000;
    return yiq >= 140 ? '#000' : '#fff';
  }

  const apiUrl = "https://script.google.com/macros/s/AKfycbwQxr3zu0WKnrlkFRjnFr7BRiv6dmxoFZttzh-JOs7IrqpikVuwfqhII3m4HTq4IQl_/exec";

  try {
    const res = await fetch(apiUrl);
    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
    const data = await res.json();

    // Assuming the API returns something like: { "Color": "Amarillo" }
    const assignedColor = data.Color || "Gris";
    const bgColor = colorMap[assignedColor] || "#9e9e9e";
    const textColor = idealTextColor(bgColor);

    document.body.style.background = bgColor;
    document.body.style.color = textColor;
    document.getElementById("teamTitle").textContent = "Tu color: " + assignedColor;
    document.getElementById("teamHint").textContent = "Muestra esta pantalla al staff";
    document.getElementById("footnote").textContent = "Enlace: " + location.href;

  } catch (err) {
    console.error("Error fetching color:", err);
    document.getElementById("teamTitle").textContent = "Error";
    document.getElementById("teamHint").textContent = "No se pudo obtener el color";
  }
})();
</script>
</body>
</html>
